import{d as P,x as S,g as h,o as k,i as z,h as o,c as a,s as v,t as _,u,a as x,r as f,e as O,k as w,w as R,y as $,b as c,F as U,p as F,j as q,_ as A,q as D}from"./index-DZ_TT7KC.js";import{g as j}from"./request-B3V5IPvX.js";const E={key:0},G={key:1},H=P({__name:"describePgae",props:{stock:{}},setup(r){const y=r,{stock:n}=S(y);function d(l){if(typeof l=="string"&&l.length>=14){const e=l.slice(0,4),s=l.slice(4,6),t=l.slice(6,8),b=l.slice(8,10),m=l.slice(10,12),i=l.slice(12,14);return`${e}/${s}/${t} ${b}:${m}:${i}`}else return console.error("Invalid dateString: ",l),"Invalid date"}return(l,e)=>{const s=h("a-descriptions-item"),t=h("a-descriptions");return k(),z(t,{title:"股票信息",bordered:""},{default:o(()=>[a(s,{label:"名字"},{default:o(()=>[v(_(u(n).name),1)]),_:1}),a(s,{label:"股票代码"},{default:o(()=>[v(_(u(n).code),1)]),_:1}),a(s,{label:"成交量"},{default:o(()=>[v(_(u(n).transactionVolume),1)]),_:1}),a(s,{label:"外盘"},{default:o(()=>[v(_(u(n).foreignDisk),1)]),_:1}),a(s,{label:"内盘",span:2},{default:o(()=>[v(_(u(n).innerDisk),1)]),_:1}),a(s,{label:"状态",span:3},{default:o(()=>[u(n).Status?(k(),x("div",E," 股票在交易 ")):(k(),x("div",G," 股票已关闭 "))]),_:1}),a(s,{label:"涨幅"},{default:o(()=>[v(_(u(n).rise),1)]),_:1}),a(s,{label:"跌幅"},{default:o(()=>[v(_(u(n).fall),1)]),_:1}),a(s,{label:"最高"},{default:o(()=>[v(_(u(n).highest),1)]),_:1}),a(s,{label:"数据最新时间"},{default:o(()=>[v(_(d(u(n).inquireTime)),1)]),_:1})]),_:1})}}}),g=r=>(F("data-v-7c01071a"),r=r(),q(),r),J=g(()=>c("br",null,null,-1)),K={class:"detile"},L=g(()=>c("div",{class:"title"},"图表数据",-1)),M=g(()=>c("div",null,"买入卖出数据",-1)),Q=g(()=>c("div",null,"价格变化数据",-1)),W=g(()=>c("div",null,"买卖数据",-1)),X=P({__name:"detilePage",setup(r){const y=f(null),n=f(null),d=f(null),l=O(),e=w(()=>l.state.stock?(console.log("切断的数据",l.state.stock.split("~")),l.state.stock.split("~")):[]);let s=w(()=>({name:e.value[1],code:e.value[2],transactionVolume:e.value[6],foreignDisk:e.value[7],innerDisk:e.value[8],rise:e.value[31],fall:e.value[32],highest:e.value[41],Status:e.value[29],inquireTime:e.value[30]})),t=w(()=>({stockname:e.value[1],stockCode:e.value[2],newestPrice:e.value[3],yesterdayClose:e.value[4],openPrice:e.value[5],dealVolume:e.value[6],buyVolume:e.value[7],sellVolume:e.value[8],buyOnePrice:e.value[9],buyOneVolume:e.value[10],buyTwoPrice:e.value[11],buyTwoVolume:e.value[12],sellOneVolume:e.value[18],sellOnePrice:e.value[19],sellTwoVolume:e.value[20],sellTwoPrice:e.value[21],buyThreePrice:e.value[13],buyThreeVolume:e.value[14],buyFourPrice:e.value[15],buyFourVolume:e.value[16],buyFivePrice:e.value[17],buyFiveVolume:e.value[18],currentTime:e.value[30]}));R(t,(m,i)=>{console.log("stockData has changed from",i,"to",m),b()},{deep:!0});const b=()=>{$(y.value).setOption({tooltip:{trigger:"item",position:function(p){return[p[0],"10%"]},formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{name:"交易量",type:"pie",data:[{value:t.value.buyVolume||0,name:"买入"},{value:t.value.sellVolume||0,name:"卖出"}]}]}),$(d.value).setOption({tooltip:{trigger:"axis",position:function(p){return[p[0],"10%"]}},xAxis:{type:"category",data:["买一","买二","买三","买四","买五","卖一","卖二"]},yAxis:{type:"value"},series:[{data:[t.value.buyOneVolume||0,t.value.buyTwoVolume||0,t.value.buyThreeVolume||0,t.value.buyFourVolume||0,t.value.buyFiveVolume||0,t.value.sellOneVolume||0,t.value.sellTwoVolume||0],type:"bar"}]}),$(n.value).setOption({tooltip:{trigger:"axis",position:function(p){return[p[0],"10%"]}},xAxis:{type:"category",data:["开盘价","昨日收盘价","当前价格"]},yAxis:{type:"value"},series:[{data:[t.value.openPrice||0,t.value.yesterdayClose||0,t.value.newestPrice||0],type:"line"}]})};return(m,i)=>(k(),x(U,null,[a(H,{stock:u(s)},null,8,["stock"]),J,c("div",K,[L,c("div",{id:"pie-chart",ref_key:"pieChart",ref:y,style:{width:"600px",height:"400px"}},null,512),M,c("div",{id:"line-chart",ref_key:"lineChart",ref:n,style:{width:"600px",height:"400px"}},null,512),Q,c("div",{id:"bar-chart",ref_key:"barChart",ref:d,style:{width:"600px",height:"400px"}},null,512),W])],64))}}),Y=A(X,[["__scopeId","data-v-7c01071a"]]),I=r=>(F("data-v-3f702021"),r=r(),q(),r),Z={class:"stock"},ee=I(()=>c("div",{class:"title"},"股票信息查询",-1)),te=I(()=>c("br",null,null,-1)),ae=I(()=>c("br",null,null,-1)),le="http://qt.gtimg.cn/q=",se=P({__name:"index",setup(r){const y=O(),n=[{value:"sh",label:"sh"},{value:"sz",label:"sz"}],d=f([]),l=f(""),e=f(""),s=f(""),t=async()=>{const i=await j(`${le}${s.value}`);l.value=i,console.log("拿到的股票数据",l.value),y.commit("updatestock",l.value)},b=()=>{s.value=d.value+e.value,t()};return(m,i)=>{const T=h("a-cascader"),p=h("a-col"),B=h("a-input-search"),N=h("a-row"),C=h("a-card");return k(),x("div",Z,[a(C,{class:"search"},{default:o(()=>[ee,te,c("div",null,[a(N,null,{default:o(()=>[a(p,{span:6},{default:o(()=>[a(T,{value:u(d),"onUpdate:value":i[0]||(i[0]=V=>D(d)?d.value=V:null),options:n,placeholder:"Please select"},null,8,["value"])]),_:1}),a(p,{span:16},{default:o(()=>[a(B,{value:u(e),"onUpdate:value":i[1]||(i[1]=V=>D(e)?e.value=V:null),placeholder:"输入股票代码","enter-button":"",onSearch:b},null,8,["value"])]),_:1})]),_:1})])]),_:1}),ae,a(C,{class:"detile"},{default:o(()=>[a(Y)]),_:1})])}}}),ue=A(se,[["__scopeId","data-v-3f702021"]]);export{ue as default};
